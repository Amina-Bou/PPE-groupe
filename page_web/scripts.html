<html>


<head>
<meta charset="UTF-8" />
<link rel="stylesheet" href="style_script.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
<link href='https://fonts.googleapis.com/css?family=Playfair+Display:400,700,900,400italic,700italic,900italic|Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
<script src="https://kit.fontawesome.com/e958190628.js" crossorigin="anonymous"></script>
<title>TAL Gazette</title>
</head>


<header class="dropdownmenu-header">
	<div class="head">
    <div class="headerobjectswrapper">
        <div class="weatherforcastbox"><span style="font-s  tyle: italic;">Programme et projet encadré : Amina, Yaasmine, Tifanny.</span><br><span>Grève - Strike - Đình công.
        </span></div>
	    <p class="titre">TAL Gazette</p>
		</div>
	<br> <br><br>

<hr>
<div class="titrestyle" >Grève  | &emsp;Srike  | &emsp;đình công  </div>

<ul class="dropdownmenu">
	<li><a href="/PPE-groupe/index.html">HOME <i class="fa-solid fa-house fa-1x"></i></a>
</li>
	<li><a href="#">TABLEAUX</a>
		<ul>
			<li><a href="/PPE-groupe/tableaux/tableau-français.html">Tableau Français </a></li>
			<li><a href="/PPE-groupe/tableaux/tableau-Anglais.html">Tableau Anglais </a></li>
			<li><a href="/PPE-groupe/tableaux/tableau-Vietnamien.html">Tableau Vietnamien</a></li>
		</ul>
	</li>


</li>
	<li><a href="#">ITRAMEUR</a>
		<ul>
			<li><a href="/PPE-groupe/page_web/itrameur-fr.html">Itrameur Français </a></li>
			<li><a href="/PPE-groupe/page_web/itrameur-ang.html">Itrameur Anglais </a></li>
			<li><a href="/PPE-groupe/page_web/itrameur-viet.html">Itrameur Vietnamien</a></li>
		</ul>
</li>
	<li><a href="/PPE-groupe/page_web/scripts.html">SCRIPTS</a>
</li>
	<li><a href="/PPE-groupe/page_web/nuages_mots.html">NUAGES DE MOTS</a>
</li>
</ul>

</header>

<p> <br> <br> <br> <br></p>

<br>



<body id= "backgroundcouleur">


<div class="content">
    <div class="collumns">
        <div class="collumn"><center>
            <div class="head"><span class="headline hl1">Description générale du script générant le tableau</span><p>
                <span class="headline hl4">"à voir"</span></p></div>
		<p> 
Ce script permet de générer un tableau contenant les données importantes de traitement pour les URLs. 
Ce script prend trois arguments : 
<br>-Le fichier d'URL
<br>-Un tableau (que le script génère) qu'il faut nommer et dans lequel le traitement des données sera redirigé 
<br>-Une expression régulière permettant de chercher le mot sur lequel nous travaillons (le script sera donc le même pour les différentes langues, sauf si une tokenisation est à faire) </p>
            <br> <br>
        <p>
            
            <span class="headline hl4">La sortie attendue</span>
            <p>
La sortie attendue de ce script est donc un tableau comprenant les informations suivantes pour chaque url:
 <br>
<br>- Un compteur indiquant le numéro de l'URL traitée
<br>- Le code de retour indiquant le statut de la réponse (exemple: réussite, erreurs du serveur, erreurs du client)
<br>- L'URL
<br>- L'encodage de la page (qui devra être UTF-8 pour toutes les URLs)
<br>- Le contenu de la page de l'URL sous le format html (.html)
<br>- Le contenu de la page de l'URL sous le format texte (.txt)
<br>- Le nombre d'occurrences du mot cible dans la page de l'URL
<br>- Le contexte d'apparition, plus précisemment la ligne précendant et suivant le mot cible
<br>- Le concordancier autour du mot cible (jusqu'à 5 mots) </p>
	
		 <br> <br>
        <p>
            
            <span class="headline hl4">Lancement du script</span>
		<p>
Pour lancer ce script, il faut se placer à la racine de la page et effectuer la commande suivante du terminal: (l'architecture de la page est celle conseillée dans la page d'exercice sur les URLS)
<br> -->  bash programmes/base_tableaux_fichier.sh ./URLs/url-Anglais ./tableaux/tableau-Anglais.html "<expression_régulière>"
Le dernier élément <expression_régulière> est à remplacer pour chaque fichier d'URL et donc de langue. 
<br>Pour l'anglais ce sera: "[S|s]trikes?"
<br>Pour le français ce sera : "[G|g]rèves?"
<br>Pour le vietnamien ce sera: (voir script vietnamien)
		
                <br></center>
        </p></div>

        <div class="collumn"><center>
            <div class="head"><span class="headline hl1">Script dans son entièrté</span>
		    <div class="bbcode_container"> 
			    <pre style="height:400px; width:100%;">
#!/usr/bin/env bash

#===============================================================================
# CE BLOC DE COMMENTAIRES.
#===============================================================================


fichier_urls=$1 # le fichier d'URL en entrée
fichier_tableau=$2 # le fichier HTML en sortie

if [[ $# -ne 3 ]]
then
	echo "Ce programme demande exactement trois arguments."
	exit
fi
mot=$3 # expression régulière du mot cible

echo $fichier_urls;
basename=$(basename -s .txt $fichier_urls)

echo "&lt;html&gt;&lt;head&gt;&lt;link rel="stylesheet" href="style.css"&gt;&lt;/head&gt;&lt;body&gt;" &gt; $fichier_tableau
echo "&lt;h2&gt;Tableau $basename :&lt;/h2&gt;" &gt;&gt; $fichier_tableau
echo "&lt;br/&gt;" &gt;&gt; $fichier_tableau
echo "&lt;table&gt;" &gt;&gt; $fichier_tableau
echo "&lt;tr&gt;&lt;th&gt;ligne&lt;/th&gt;&lt;th&gt;code&lt;/th&gt;&lt;th&gt;URL&lt;/th&gt;&lt;th&gt;encodage&lt;/th&gt;&lt;th&gt;dump_html&lt;/th&gt;&lt;th&gt;dump_text&lt;/th>&lt;th&gt;occurrences&lt;/th&gt;&lt;th&gt;contextes&lt;/th&gt;&lt;th&gt;concordances&lt;/th&gt;&lt;/tr&gt;" &gt;&gt; $fichier_tableau

lineno=1;
while read -r URL; do

	#récupération des pages web utilisées en format html
	curl $URL &gt; "./aspirations/$basename-$lineno.html"
	
	echo -e "\tURL : $URL";
	# la façon attendue, sans l'option -w de cURL
	code=$(curl -ILs $URL | grep -e "^HTTP/" | grep -Eo "[0-9]{3}" | tail -n 1)
	charset=$(curl -ILs $URL "./aspirations/$basename-$lineno.html" | grep -Eo "charset=(\w|-)+" | cut -d= -f2 | tail -n 1)

	# autre façon, avec l'option -w de cURL
	# code=$(curl -Ls -o /dev/null -w "%{http_code}" $URL)
	# charset=$(curl -ILs -o /dev/null -w "%{content_type}" $URL | grep -Eo "charset=(\w|-)+" | cut -d= -f2)

	echo -e "\tcode : $code";

	if [[ ! $charset ]]
	then
		echo -e "\tencodage non détecté, on prendra UTF-8 par défaut.";
		charset="UTF-8";
	else
		echo -e "\tencodage : $charset";
	fi

	if [[ $code -eq 200 ]]
	then
		dump=$(lynx -dump -nolist -assume_charset=$charset -display_charset=$charset $URL)
		if [[ $charset -ne "UTF-8" && -n "$dump" ]]
		then
			dump=$(echo $dump | iconv -f $charset -t UTF-8//IGNORE)	
		fi
	else
		echo -e "\tcode différent de 200 utilisation d'un dump vide"
		dump=""
		charset=""
	fi
	
	# Compte des occurrences 
	compte=$(echo $dump | grep -o -i -P "$mot" | wc -l)
	
	echo "$dump" &gt; "./dumps-text/$basename-$lineno.txt"
	
	# construction du contexte 
	echo "$dump" | grep -P -A2 -B2 $mot &gt; "./contextes/$basename-$lineno.txt"
	
	# construction des concordances

 	bash programmes/concordance.sh ./dumps-text/$basename-$lineno.txt $mot &gt; ./concordances/$basename-$lineno.html

	echo "&lt;tr&gt;&lt;td&gt;$lineno&lt;/td&gt;&lt;td&gt;$code&lt;/td&gt;&lt;td&gt;&lt;a href=\"$URL\">$URL&lt;/a&gt;&lt;/td&gt;&lt;td&gt;$charset&lt;/td&gt;&lt;td&gt;&lt;a href="../aspirations/$basename-$lineno.html"&gt;html&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href="../dumps-text/$basename-$lineno.txt"&gt;text&lt;/a&gt;&lt;/td&gt;&lt;td&gt;$compte&lt;/td&gt;&lt;td&gt;&lt;a href="../contextes/$basename-$lineno.txt"&gt;contextes&lt;/a&gt;&lt;/td&gt;&lt;td&gt;&lt;a href="../concordances/$basename-$lineno.html"&gt;concordance&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;" &gt;&gt; $fichier_tableau
	echo -e "\t--------------------------------"
	lineno=$((lineno+1));
done &lt; $fichier_urls
echo "&lt;/table&gt;" &gt;&gt; $fichier_tableau
echo "&lt;/body&gt;&lt;/html&gt;" &gt;&gt; $fichier_tableau 
			</pre>
		    </div>
		
		
        <div class="collumn"><center><div class="head"><span class="headline hl1">Description précise du contenu</span><p>
		<span class="headline hl4">"rentrons dans les détails..."</span></p></div>
		<p></p>
		
		
	<br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br>
        </div>

        <div class="collumn"><center><div class="head"><span class="headline hl1">Contexte en Angleterre</span><p></p></div><p>Le phénomène de grève est également très répandu en Angleterre.
            Au sein de la société anglaise, le droit de grève est un outil de protestation économique de masse souvent en conjonction avec d'autres formes d'action (comme par exemple, électorale).
            D’un point de vue historique et politique, suite à la loi anti-syndicale, la grève générale est passée d'un outil de solidarité de grève ouvrière à une forme générale de protestation sociale, politique et économique.</p></center>
           <!-- <img src="https://i.guim.co.uk/img/media/0cdb8c44972be2fa4611be7e9855d7e138a63406/0_48_3000_1800/master/3000.jpg?width=620&quality=85&dpr=1&s=none" width=100% height=25%/>-->
            <br> <br> <br>

        
    </div>
    </div>
</body>
<br><br>
<br><br>





</head>


    <div class="footer-basic">
        <footer>
            <div class="social"><a href="#"><i class="fa-brands fa-instagram fa-1x"></i></a><a href="#"><i class="fa-brands fa-snapchat"></i></a><a href="#"><i class="fa-brands fa-twitter"></i></a><a href="#"><i class="fa-brands fa-github"></i></a></div>
            <ul class="list-inline">
                <li class="list-inline-item"><a href="#">Home</a></li>
                <li class="list-inline-item"><a href="#">Services</a></li>
                <li class="list-inline-item"><a href="#">About</a></li>
                <li class="list-inline-item"><a href="#">Terms</a></li>
                <li class="list-inline-item"><a href="#">Privacy Policy</a></li>
            </ul>
            <p class="copyright">Projet TAL © 2022</p>
        </footer>
    </div>





</html>
